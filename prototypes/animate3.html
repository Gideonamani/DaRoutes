<!DOCTYPE html>
<html>
<head>
    <title>Bus Route Visualization</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-omnivore/0.3.4/leaflet-omnivore.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <style>
        #map { height: 100vh; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // Initialize the map
        const map = L.map('map').setView([-6.8, 39.25], 12);
    
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);
    
        // Function to draw and animate the test line
        function animateTestLine() {
            const testCoords = [
                [-6.8, 39.25],
                [-6.85, 39.3],
                [-6.9, 39.35],
            ];
    
            // Create the polyline
            const testPolyline = L.polyline(testCoords, { color: 'blue', weight: 5 }).addTo(map);
            map.fitBounds(testPolyline.getBounds());
    
            // Access the polyline's SVG path
            const path = testPolyline.getElement();
            const length = path.getTotalLength();
    
            // Set initial SVG path stroke properties
            path.style.strokeDasharray = `${length} ${length}`;
            path.style.strokeDashoffset = length;
    
            // Animate the stroke
            const animationDuration = 3000; // Animation duration in milliseconds
            let startTime;
    
            function animate(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = timestamp - startTime;
    
                // Calculate the current offset
                const offset = Math.max(length - (progress / animationDuration) * length, 0);
                path.style.strokeDashoffset = offset;
    
                // Continue animation if not done
                if (progress < animationDuration) {
                    requestAnimationFrame(animate);
                } else {
                    path.style.strokeDashoffset = '0'; // Ensure the animation ends cleanly
                }
            }
    
            // Start the animation
            requestAnimationFrame(animate);
        }
    
        // Call the animation function
        animateTestLine();
    </script>
    
    
</body>
</html>



